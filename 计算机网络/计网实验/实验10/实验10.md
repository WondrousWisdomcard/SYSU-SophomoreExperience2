NAT的一个作用是实现TCP负载重分配。

负载均衡的概念：把一台客户机或者服务器上的繁重任务分配到多台客户机或者服务器上，然后通过指定一个虚拟IP地址映射到客户端或者服务器。

负载均衡的工作过程：外部主机向虚拟主机发起通信时，NAT接收外部主机的请求并根据NAT表建立与内部主机的连接，然后目的地址翻译成内部局部地址并转发数据包到内部主机，内部主机对此做出相应，NAT再使用内部局部地址和端口查询数据表，根据查询到的外部地址和端口做出相应。

负载均衡的发生前提：访问量上升，一台服务器难以承载并发访问时。

负载均衡一般采用轮询方式，是每台服务器都有被平等访问的机会，其实负载均衡的算法很灵活，如随机选择，可根据最少连接数及响应时间分配负载。

TCP负载均衡的具体配置过程：

1. 完成路由器的基本配置，并定义各个端口是内部端口还是外部端口。
2. 定义一个标准访问列表，用于标识要转换的合法IP。
3. 定义NAT地址池内部标识Web服务器的本地地址，用关键词rotary表示使用轮询策略。
4. 将目的地址访问表中的IP报文转化为地址池中定义的IP地址。

NAT TCP 技术原理：

NAT负载均衡只适用于TCP连接，对于非TCP请求，NAT不会对其进行转换。





